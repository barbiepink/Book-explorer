{"ast":null,"code":"import _objectSpread from\"D:/downloads/Book-explorer-main (1)/Book-explorer-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'./App.css';import BookList from'./components/BookList';import SearchFilter from'./components/SearchFilter';import BookDetail from'./components/BookDetail';import Pagination from'./components/Pagination';import{fetchBooks,fetchBookById,refreshBooks}from'./services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[books,setBooks]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedBook,setSelectedBook]=useState(null);const[showModal,setShowModal]=useState(false);const[pagination,setPagination]=useState({currentPage:1,totalPages:1,totalItems:0});const[filters,setFilters]=useState({search:'',minRating:'',maxRating:'',minPrice:'',maxPrice:'',inStock:'',sortBy:'title',sortOrder:'asc'});useEffect(()=>{loadBooks();},[filters,pagination.currentPage]);const loadBooks=async()=>{try{setLoading(true);setError(null);const data=await fetchBooks(_objectSpread(_objectSpread({},filters),{},{page:pagination.currentPage,limit:12}));setBooks(data.books);setPagination(data.pagination);}catch(err){setError('Failed to load books. Please try again.');console.error(err);}finally{setLoading(false);}};const handleBookClick=async bookId=>{try{const book=await fetchBookById(bookId);setSelectedBook(book);setShowModal(true);}catch(err){console.error('Failed to fetch book details:',err);}};const handleFilterChange=newFilters=>{setFilters(newFilters);setPagination(prev=>_objectSpread(_objectSpread({},prev),{},{currentPage:1}));};const handlePageChange=page=>{setPagination(prev=>_objectSpread(_objectSpread({},prev),{},{currentPage:page}));window.scrollTo(0,0);};const handleRefresh=async()=>{try{await refreshBooks();alert('Book data refresh initiated. This may take a few minutes.');setTimeout(loadBooks,5000);}catch(err){alert('Failed to refresh book data.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDCDA Book Explorer\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Discover your next great read\"}),/*#__PURE__*/_jsx(\"button\",{className:\"refresh-btn\",onClick:handleRefresh,children:\"\\uD83D\\uDD04 Refresh Data\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"App-main\",children:[/*#__PURE__*/_jsx(SearchFilter,{filters:filters,onFilterChange:handleFilterChange}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading books...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),!loading&&!error&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"results-info\",children:[\"Showing \",books.length,\" of \",pagination.totalItems,\" books\"]}),/*#__PURE__*/_jsx(BookList,{books:books,onBookClick:handleBookClick}),/*#__PURE__*/_jsx(Pagination,{currentPage:pagination.currentPage,totalPages:pagination.totalPages,onPageChange:handlePageChange})]}),showModal&&selectedBook&&/*#__PURE__*/_jsx(BookDetail,{book:selectedBook,onClose:()=>{setShowModal(false);setSelectedBook(null);}})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"App-footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2024 Book Explorer. Built with React & Node.js\"})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BookList","SearchFilter","BookDetail","Pagination","fetchBooks","fetchBookById","refreshBooks","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","books","setBooks","loading","setLoading","error","setError","selectedBook","setSelectedBook","showModal","setShowModal","pagination","setPagination","currentPage","totalPages","totalItems","filters","setFilters","search","minRating","maxRating","minPrice","maxPrice","inStock","sortBy","sortOrder","loadBooks","data","_objectSpread","page","limit","err","console","handleBookClick","bookId","book","handleFilterChange","newFilters","prev","handlePageChange","window","scrollTo","handleRefresh","alert","setTimeout","className","children","onClick","onFilterChange","length","onBookClick","onPageChange","onClose"],"sources":["D:/downloads/Book-explorer-main (1)/Book-explorer-main/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport BookList from './components/BookList';\nimport SearchFilter from './components/SearchFilter';\nimport BookDetail from './components/BookDetail';\nimport Pagination from './components/Pagination';\nimport { fetchBooks, fetchBookById, refreshBooks } from './services/api';\n\nfunction App() {\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedBook, setSelectedBook] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  const [pagination, setPagination] = useState({\n    currentPage: 1,\n    totalPages: 1,\n    totalItems: 0\n  });\n  const [filters, setFilters] = useState({\n    search: '',\n    minRating: '',\n    maxRating: '',\n    minPrice: '',\n    maxPrice: '',\n    inStock: '',\n    sortBy: 'title',\n    sortOrder: 'asc'\n  });\n\n  useEffect(() => {\n    loadBooks();\n  }, [filters, pagination.currentPage]);\n\n  const loadBooks = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await fetchBooks({\n        ...filters,\n        page: pagination.currentPage,\n        limit: 12\n      });\n      setBooks(data.books);\n      setPagination(data.pagination);\n    } catch (err) {\n      setError('Failed to load books. Please try again.');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBookClick = async (bookId) => {\n    try {\n      const book = await fetchBookById(bookId);\n      setSelectedBook(book);\n      setShowModal(true);\n    } catch (err) {\n      console.error('Failed to fetch book details:', err);\n    }\n  };\n\n  const handleFilterChange = (newFilters) => {\n    setFilters(newFilters);\n    setPagination(prev => ({ ...prev, currentPage: 1 }));\n  };\n\n  const handlePageChange = (page) => {\n    setPagination(prev => ({ ...prev, currentPage: page }));\n    window.scrollTo(0, 0);\n  };\n\n  const handleRefresh = async () => {\n    try {\n      await refreshBooks();\n      alert('Book data refresh initiated. This may take a few minutes.');\n      setTimeout(loadBooks, 5000);\n    } catch (err) {\n      alert('Failed to refresh book data.');\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>ðŸ“š Book Explorer</h1>\n        <p>Discover your next great read</p>\n        <button className=\"refresh-btn\" onClick={handleRefresh}>\n          ðŸ”„ Refresh Data\n        </button>\n      </header>\n\n      <main className=\"App-main\">\n        <SearchFilter \n          filters={filters}\n          onFilterChange={handleFilterChange}\n        />\n\n        {loading && <div className=\"loading\">Loading books...</div>}\n        {error && <div className=\"error\">{error}</div>}\n\n        {!loading && !error && (\n          <>\n            <div className=\"results-info\">\n              Showing {books.length} of {pagination.totalItems} books\n            </div>\n            <BookList \n              books={books}\n              onBookClick={handleBookClick}\n            />\n            <Pagination\n              currentPage={pagination.currentPage}\n              totalPages={pagination.totalPages}\n              onPageChange={handlePageChange}\n            />\n          </>\n        )}\n\n        {showModal && selectedBook && (\n          <BookDetail\n            book={selectedBook}\n            onClose={() => {\n              setShowModal(false);\n              setSelectedBook(null);\n            }}\n          />\n        )}\n      </main>\n\n      <footer className=\"App-footer\">\n        <p>Â© 2024 Book Explorer. Built with React & Node.js</p>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}